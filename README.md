# Инкремент 17. Улучшение производительности по памяти при помощи анализа профилей pprof 

В качестве примера рассматривается оптимизация конфигации приложения с in-memory storage.

---

1. Для уменьшения аллокаций памяти в repository.(*URLMemoryStorage).Set задал подходящий размер слайса `records`, 
в котором хранятся записи хранилища.

2. Для хранилища пользователей также задал подходящий размер карты `users` при инициализации, 
чтобы не происходила постоянная аллокация.

3. В AuthService помнял тип для поля `secret` (`string` -> `[]byte`), 
чтобы избежать аллокации при каждой валидации или создании токена авторизации.


